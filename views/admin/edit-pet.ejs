<!DOCTYPE html>
<!-- ===== Page: Admin Edit Pet ===== -->
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>Edit Pet - Home4Pets</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- CSS -->
  <link rel="stylesheet" href="/style.css">
</head>
<body class="minimal-theme">

<nav class="navbar">
  <div class="d-flex align-items-center gap-2">
    <img src="/logo.png" alt="Logo" style="height: 30px; margin-right: 8px;"> <a href="/" style="text-decoration: none;"><span class="navbar-brand">Home4Pets</span></a>
  </div>

  <div class="d-flex align-items-center">
    <a class="nav-link" href="/admin">จัดการข้อมูลสัตว์เลี้ยง</a>
    <a class="nav-link" href="/admin">ค้นหาสัตว์</a>
    <a class="nav-link" href="/admin">ตั้งค่า</a>

    <div class="user-badge ms-3">
      <span><%= user.name %></span>
      <img src="https://cdn-icons-png.flaticon.com/512/847/847969.png">
    </div>
  </div>
</nav>

<!-- Dashboard Header -->
<div class="admin-header" style="background-image: url('/banner.png'); background-size: cover; background-position: center;">
  <h2>Edit Pet</h2>
</div>

<div class="container-fluid">
  <div class="row">
    <!-- Sidebar -->
    <div class="col-3">
      <div class="admin-sidebar">
        <button class="admin-menu" onclick="location.href='/admin'">จัดการข้อมูลสัตว์เลี้ยง</button>
        <button class="admin-menu active">แก้ไขสัตว์เลี้ยง</button>
        <button class="admin-menu" onclick="location.href='/admin'">ตั้งค่า</button>
      </div>
    </div>

    <!-- Content -->
    <div class="col-9">
      <div class="admin-form-card">
        <div class="admin-form-header">
          <div>
            <h5>แก้ไขข้อมูลสัตว์เลี้ยง</h5>
            <p>อัปเดตข้อมูลสัตว์เลี้ยงให้ครบถ้วนและตรงกับความเป็นจริง</p>
          </div>
          <span class="admin-form-badge">Edit</span>
        </div>
        <form action="/admin/edit-pet" method="POST" enctype="multipart/form-data">
        <input type="hidden" name="id" value="<%= pet.id %>">
        <div class="row g-3">
          <div class="col-md-6">
            <label for="name" class="form-label">ชื่อสัตว์เลี้ยง</label>
            <input type="text" class="form-control" id="name" name="name" value="<%= pet.name %>" required>
          </div>
          <div class="col-md-6">
            <label for="type" class="form-label">ประเภทสัตว์เลี้ยง</label>
            <select class="form-control" id="type" name="type" required>
              <option value="cats" <%= pet.type === 'cats' ? 'selected' : '' %>>แมว</option>
              <option value="dogs" <%= pet.type === 'dogs' ? 'selected' : '' %>>สุนัข</option>
            </select>
          </div>

          <div class="col-md-3">
            <label for="gender" class="form-label">เพศ</label>
            <select class="form-control" id="gender" name="gender" required>
              <option value="male" <%= (pet.gender === 'male' || pet.gender === '♂') ? 'selected' : '' %>>เพศผู้</option>
              <option value="female" <%= (pet.gender === 'female' || pet.gender === '♀') ? 'selected' : '' %>>เพศเมีย</option>
            </select>
          </div>
          <div class="col-md-3">
            <label for="age_year" class="form-label">อายุ (ปี)</label>
            <input type="number" min="0" class="form-control" id="age_year" name="age_year" value="<%= pet.ageYear || 0 %>" required>
          </div>
          <div class="col-md-3">
            <label for="age_month" class="form-label">อายุ (เดือน)</label>
            <input type="number" min="0" max="11" class="form-control" id="age_month" name="age_month" value="<%= pet.ageMonth || 0 %>" required>
          </div>
          <div class="col-md-3">
            <label class="form-label">รหัสสัตว์ ID</label>
            <div class="form-control" style="background: #f6f6f6; color: #777;"><%= pet.petId || '-' %></div>
          </div>

          <div class="col-md-6">
            <label class="form-label d-block">ทำหมัน</label>
            <div class="form-check form-check-inline">
              <input class="form-check-input" type="radio" name="sterilized" id="sterilized_yes" value="yes" <%= pet.sterilized === 'yes' ? 'checked' : '' %> required>
              <label class="form-check-label" for="sterilized_yes">ทำแล้ว</label>
            </div>
            <div class="form-check form-check-inline">
              <input class="form-check-input" type="radio" name="sterilized" id="sterilized_no" value="no" <%= pet.sterilized === 'no' ? 'checked' : '' %> required>
              <label class="form-check-label" for="sterilized_no">ยังไม่ทำ</label>
            </div>
          </div>

          <div class="col-md-6">
            <label for="vaccinated" class="form-label">วัคซีน</label>
            <select class="form-control" id="vaccinated" name="vaccinated" required>
              <option value="yes" <%= pet.vaccinated === 'yes' ? 'selected' : '' %>>ฉีดแล้ว</option>
              <option value="no" <%= pet.vaccinated === 'no' ? 'selected' : '' %>>ยังไม่ฉีด</option>
            </select>
          </div>

          <div class="col-md-6">
            <label for="post_status" class="form-label">สถานะโพสต์</label>
            <select class="form-control" id="post_status" name="post_status" required>
              <option value="open" <%= pet.postStatus === 'open' ? 'selected' : '' %>>เปิดโพสต์</option>
              <option value="close" <%= pet.postStatus === 'close' ? 'selected' : '' %>>ปิดโพสต์</option>
            </select>
          </div>

          <div class="col-md-6">
            <label for="adoption_status" class="form-label">สถานะการรับเลี้ยง</label>
            <select class="form-control" id="adoption_status" name="adoption_status" required>
              <option value="available" <%= pet.adoptionStatus === 'available' ? 'selected' : '' %>>พร้อมรับเลี้ยง</option>
              <option value="adopted" <%= pet.adoptionStatus === 'adopted' ? 'selected' : '' %>>ได้รับการรับเลี้ยงแล้ว</option>
            </select>
          </div>

          <div class="col-md-6">
            <label for="color" class="form-label">สี</label>
            <select class="form-control" id="color" name="color">
              <option value="" <%= !pet.color ? 'selected' : '' %>>-เลือก-</option>
              <option value="White" <%= pet.color === 'White' ? 'selected' : '' %>>White</option>
              <option value="Black" <%= pet.color === 'Black' ? 'selected' : '' %>>Black</option>
              <option value="Brown" <%= pet.color === 'Brown' ? 'selected' : '' %>>Brown</option>
              <option value="Gray" <%= pet.color === 'Gray' ? 'selected' : '' %>>Gray</option>
              <option value="Orange" <%= pet.color === 'Orange' ? 'selected' : '' %>>Orange</option>
              <option value="Calico" <%= pet.color === 'Calico' ? 'selected' : '' %>>Calico</option>
              <option value="Tabby" <%= pet.color === 'Tabby' ? 'selected' : '' %>>Tabby</option>
            </select>
          </div>
          <div class="col-md-6">
            <label for="image1" class="form-label">รูปภาพ 1 (เว้นว่างหากไม่เปลี่ยน)</label>
            <input type="file" class="form-control" id="image1" name="image1" accept="image/*">
          </div>
          <div class="col-md-6">
            <label for="image2" class="form-label">รูปภาพ 2 (เว้นว่างหากไม่เปลี่ยน)</label>
            <input type="file" class="form-control" id="image2" name="image2" accept="image/*">
          </div>
          <div class="col-md-6">
            <label for="image3" class="form-label">รูปภาพ 3 (เว้นว่างหากไม่เปลี่ยน)</label>
            <input type="file" class="form-control" id="image3" name="image3" accept="image/*">
          </div>

          <div class="col-12">
            <label for="details" class="form-label">ข้อมูลสัตว์เลี้ยง</label>
            <textarea class="form-control" id="details" name="details" rows="3" placeholder="คำอธิบาย / นิสัย"><%= pet.details || '' %></textarea>
          </div>

          <div class="col-12 d-flex gap-2">
            <button type="submit" class="btn btn-primary">บันทึกการแก้ไข</button>
            <form action="/admin/delete-pet" method="POST" onsubmit="return confirm('ลบข้อมูลสัตว์เลี้ยงนี้ใช่หรือไม่?');">
              <input type="hidden" name="id" value="<%= pet.id %>">
              <button type="submit" class="btn btn-danger">ลบข้อมูล</button>
            </form>
          </div>
        </div>
        </form>
      </div>
    </div>
  </div>
</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>